"use strict";

// electron/preload.ts
var import_electron = require("electron");
import_electron.contextBridge.exposeInMainWorld("electronAPI", {
  // Audio file operations
  openAudioFileDialog: () => import_electron.ipcRenderer.invoke("open-audio-file-dialog"),
  selectOutputDirectory: () => import_electron.ipcRenderer.invoke("select-output-directory"),
  openFolder: (folderPath) => import_electron.ipcRenderer.invoke("open-folder", folderPath),
  scanDirectory: (folderPath) => import_electron.ipcRenderer.invoke("scan-directory", folderPath),
  separateAudio: (inputFile, modelId, outputDir, stems, device, overlap, segmentSize, tta) => import_electron.ipcRenderer.invoke("separate-audio", { inputFile, modelId, outputDir, stems, device, overlap, segmentSize, tta }),
  onSeparationProgress: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("separation-progress", handler);
    return () => import_electron.ipcRenderer.removeListener("separation-progress", handler);
  },
  onSeparationComplete: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("separation-complete", handler);
    return () => import_electron.ipcRenderer.removeListener("separation-complete", handler);
  },
  onSeparationError: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("separation-error", handler);
    return () => import_electron.ipcRenderer.removeListener("separation-error", handler);
  },
  // Model operations
  getModels: () => import_electron.ipcRenderer.invoke("get-models"),
  downloadModel: (modelId) => import_electron.ipcRenderer.invoke("download-model", modelId),
  pauseDownload: (modelId) => import_electron.ipcRenderer.invoke("pause-download", modelId),
  resumeDownload: (modelId) => import_electron.ipcRenderer.invoke("resume-download", modelId),
  removeModel: (modelId) => import_electron.ipcRenderer.invoke("remove-model", modelId),
  importCustomModel: (filePath, modelName, architecture) => import_electron.ipcRenderer.invoke("import-custom-model", { filePath, modelName, architecture }),
  checkPresetModels: (presetMappings) => import_electron.ipcRenderer.invoke("check-preset-models", presetMappings),
  getGpuDevices: () => import_electron.ipcRenderer.invoke("get-gpu-devices"),
  // Model download progress
  onDownloadProgress: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("download-progress", handler);
    return () => import_electron.ipcRenderer.removeListener("download-progress", handler);
  },
  onDownloadComplete: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("download-complete", handler);
    return () => import_electron.ipcRenderer.removeListener("download-complete", handler);
  },
  onDownloadError: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("download-error", handler);
    return () => import_electron.ipcRenderer.removeListener("download-error", handler);
  },
  onDownloadPaused: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("download-paused", handler);
    return () => import_electron.ipcRenderer.removeListener("download-paused", handler);
  },
  // Backend error handling
  onBackendError: (callback) => {
    const handler = (_event, data) => callback(data);
    import_electron.ipcRenderer.on("backend-error", handler);
    return () => import_electron.ipcRenderer.removeListener("backend-error", handler);
  }
});
