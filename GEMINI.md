# üß† StemSep-V3 - AI Developer Context

## üìã Project Overview
**StemSep-V3** is a local, AI-powered audio stem separation desktop application. It allows users to split audio files into individual tracks (vocals, drums, bass, etc.) using state-of-the-art machine learning models.

### üèóÔ∏è Architecture
The project is a hybrid **Electron + Python** application:
*   **Frontend (`electron-poc/`):**
    *   **Framework:** Electron, React, TypeScript, Vite.
    *   **Styling:** Tailwind CSS, shadcn/ui.
    *   **Role:** Handles the user interface, file management, audio playback, and interaction with the Python backend.
*   **Backend (`StemSepApp/`):**
    *   **Core:** Python 3.
    *   **ML Framework:** PyTorch (Torch/Torchaudio).
    *   **Audio Processing:** Librosa, SoundFile, FFmpeg.
    *   **Role:** Executes the AI inference using models like BS-Roformer, Mel-Roformer, MDX23C, and SCNet.
*   **Bridge:**
    *   Communication occurs via a Python bridge script (`electron-poc/python-bridge.py`) using standard I/O (stdin/stdout) or IPC to relay commands and progress between Electron and the Python engine.

---

## üìÇ Directory Structure

### `electron-poc/` (Frontend)
*   `package.json`: Node dependencies and scripts (`npm run electron:dev`).
*   `src/`: React source code.
    *   `components/`: UI components (Upload area, Player, Progress bars).
    *   `App.tsx`: Main application entry point.
*   `python-bridge.py`: The interface script spawned by Electron to run Python code.

### `StemSepApp/` (Backend)
*   `src/main.py`: Legacy/Stand-alone Python entry point.
*   `src/core/`: Core logic for configuration and separation management.
*   `src/audio/`: Audio processing and inference engines.
*   `src/models/`: Model management (downloading, loading).
*   `requirements.txt`: Python dependencies.

### Root Files
*   `MCP_TOOLS_GUIDE.md`: Documentation for Model Context Protocol tools.
*   `stemsep_cli.py`: Command-line interface for separation tasks.

---

## üöÄ Development & Usage

### Prerequisites
*   **Node.js:** v18+
*   **Python:** 3.10+
*   **FFmpeg:** Must be installed and on the system PATH.
*   **CUDA (Optional):** For GPU acceleration (strongly recommended).

### Setup
1.  **Backend:**
    ```bash
    # In root or StemSepApp/
    python -m venv .venv
    source .venv/bin/activate  # or .venv\Scripts\activate
    pip install -r StemSepApp/requirements.txt
    ```
2.  **Frontend:**
    ```bash
    cd electron-poc
    npm install
    ```

### Running the Application
To start the full stack (Electron + React + Python Bridge) in development mode:
```bash
cd electron-poc
npm run electron:dev
```
*This command concurrently runs Vite (for React HMR) and Electron, which in turn spawns the Python bridge.*

---

## ü§ñ AI Agent Guidelines

### Core Directive
You are an autonomous AI developer for StemSep-V3. Your goal is to maintain, refactor, and enhance this application. Always prefer using available tools to explore context before asking the user.

### üõ†Ô∏è Tool Usage Strategy
*   **`codebase_investigator`**: Use this FIRST for complex tasks to understand dependencies between the React frontend and Python backend.
*   **`grep` / `glob`**: Use for targeted searches (e.g., finding where specific models are loaded).
*   **`run_shell_command`**: Use to run tests (`npm test`, `pytest`), install dependencies, or start the app.
*   **`write_file` / `replace`**: Use for code modifications. Always verify the file content first.

### üí° Project-Specific Behaviors
*   **Cross-Language Context:** When modifying the UI (React), checking the backend (Python) response format in `python-bridge.py` is often necessary.
*   **Models:** The app relies on external model weights (Roformer, MDX). Assume they are downloaded to `models/` or handled by `ModelManager`.
*   **Performance:** Audio separation is heavy. Be mindful of async operations and progress reporting in the UI to prevent freezing.

### üì¶ MCP Integration
This environment supports the Model Context Protocol (MCP).
*   **GitHub:** Use for issue tracking and PRs if connected.
*   **Google Drive:** Use for accessing external project docs if needed.
*   **Sequential Thinking:** Use for complex architectural refactoring.

---
*Auto-generated by Gemini Agent - December 7, 2025*
